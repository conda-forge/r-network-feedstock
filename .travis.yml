# This file was generated automatically from conda-smithy. To update this configuration,
# update the conda-forge.yml and/or the recipe/meta.yaml.

language: generic

os: osx
osx_image: xcode6.4

env:
  matrix:
    
    - CONDA_R=3.3.2
    - CONDA_R=3.4.1
  global:
    # The BINSTAR_TOKEN secure variable. This is defined canonically in conda-forge.yml.
    - secure: "vK52YyNk4jQir2GQOgDsxNzdHkL+0a5oH6IdHxuU3AQc0xfWTk220XgysnGf7IYYoQNHzQQEUXhAxmfXCwQ26UIyiYwU4doCuRMcLocEdjBRxTJroi7Yuqaw25+4Rcc2DgAW2BBzzmoO8Er8Mkz6SOQFAYLJL6S0AG9N6j7Sg0e7s/Clw4p8Yq8nN0voz2jGVYYcoSzG+DBGDNsnN0YdKJmyj3/7uFSZCtyI/E70Ylk8O40XH2iA2bd31jqI4cxg+oMRRxMu1NiX2SVCH+JK6gXGiKxmMJoYfw6eSZj/3uVWThqSxX+8ygPz/CgHmO+SENWPqdUO6905V2yh96HnEEMn6ctSjTOF9QYD4xXa/qlXciiRJn1KzpOCkBJ4IpwgosYnNvP9BCX+pGz/gkB8WH6oCBwAZ3Gz0aFOe7KGcWenYEqW8g+ZS17vW+fRBukuky88s3wwCcov6WaWQcsy1c0cgzI9gPkwzADCpvun9COu+CSnS2f5lBVLwuwEakR5b2QnQuI+HxOg2izM1hrvl5Ne2rLUVShr4bWzNH6oGDOVwOd/ags1lNsm1ipwpa8Z8VdurEr4wMCDhdnTPPmVEcq9rCecxvu2/sr1vufLVaAkh1nfGzAuacZaDSl/P/qY1aooyon/toY/eo6zwuDJyRGBI6K43DxdnaFA1DBeLdo="


before_install:
    # Fast finish the PR.
    - |
      (curl https://raw.githubusercontent.com/conda-forge/conda-forge-build-setup-feedstock/master/recipe/ff_ci_pr_build.py | \
          python - -v --ci "travis" "${TRAVIS_REPO_SLUG}" "${TRAVIS_BUILD_NUMBER}" "${TRAVIS_PULL_REQUEST}") || exit 1

    # Remove homebrew.
    - |
      echo ""
      echo "Removing homebrew from Travis CI to avoid conflicts."
      curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall > ~/uninstall_homebrew
      chmod +x ~/uninstall_homebrew
      ~/uninstall_homebrew -fq
      rm ~/uninstall_homebrew


install:
    # Install Miniconda.
    - |
      echo ""
      echo "Installing a fresh version of Miniconda."
      MINICONDA_URL="https://repo.continuum.io/miniconda"
      MINICONDA_FILE="Miniconda3-latest-MacOSX-x86_64.sh"
      curl -L -O "${MINICONDA_URL}/${MINICONDA_FILE}"
      bash $MINICONDA_FILE -b

    # Configure conda.
    - |
      echo ""
      echo "Configuring conda."
      source /Users/travis/miniconda3/bin/activate root
      conda config --remove channels defaults
      conda config --add channels defaults
      conda config --add channels conda-forge
      conda config --set show_channel_urls true
      conda install --yes --quiet conda-forge-build-setup
      source run_conda_forge_build_setup

script:
  - conda build ./recipe

  - upload_or_check_non_existence ./recipe conda-forge --channel=main
